---
phase: 07-ux-polish-progression-workflow
plan: 03
type: execute
wave: 3
depends_on: [07-02]
files_modified:
  - src/ui/ChordPumperLookAndFeel.h
  - src/ui/PadComponent.cpp
  - src/ui/ProgressionStrip.cpp
  - src/ui/PluginEditor.cpp
autonomous: true
requirements: [UX-05]

must_haves:
  truths:
    - "Grid pads have visible chord-type-specific accent colours (major=blue, minor=purple, diminished=red, etc.)"
    - "Pads use subtle gradient backgrounds instead of flat fills"
    - "Progression strip slots show chord-type colours matching the grid pads"
    - "Overall UI has a cohesive, polished visual appearance"
  artifacts:
    - path: "src/ui/ChordPumperLookAndFeel.h"
      provides: "Chord-type accent colour constants and accentForType() lookup"
      contains: "accentForType"
    - path: "src/ui/PadComponent.cpp"
      provides: "Gradient fill and accent border in pad paint()"
      contains: "ColourGradient"
    - path: "src/ui/ProgressionStrip.cpp"
      provides: "Chord-type accent colours on filled strip slots"
      contains: "accentForType"
  key_links:
    - from: "src/ui/PadComponent.cpp"
      to: "PadColours::accentForType"
      via: "paint() uses accentForType(chord.type) for border colour"
      pattern: "accentForType"
    - from: "src/ui/ProgressionStrip.cpp"
      to: "PadColours::accentForType"
      via: "paint() uses accentForType for filled slot styling"
      pattern: "accentForType"
---

<objective>
Apply visual polish across the plugin UI with chord-type-specific accent colours, gradient fills, and cohesive styling.

Purpose: Makes chord types instantly recognizable by colour (major=blue, minor=purple, etc.) and gives the plugin a professional, polished look.
Output: Visually differentiated pads and strip slots, gradient backgrounds, refined overall appearance.
</objective>

<execution_context>
@~/.cursor/get-shit-done/workflows/execute-plan.md
@~/.cursor/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/07-ux-polish-progression-workflow/07-RESEARCH.md
@.planning/phases/07-ux-polish-progression-workflow/07-02-SUMMARY.md

@src/ui/ChordPumperLookAndFeel.h
@src/ui/PadComponent.cpp
@src/ui/ProgressionStrip.cpp
@src/ui/PluginEditor.cpp
@src/engine/ChordType.h
</context>

<tasks>

<task type="auto">
  <name>Task 1: Chord-type accent colours and pad visual enhancement</name>
  <files>src/ui/ChordPumperLookAndFeel.h, src/ui/PadComponent.cpp</files>
  <action>
  **ChordPumperLookAndFeel.h** — Extend the PadColours namespace with chord-type accent colours:

  Add these constants inside `namespace PadColours`:
  ```
  inline constexpr juce::uint32 majorAccent      = 0xff4a9eff; // blue
  inline constexpr juce::uint32 minorAccent      = 0xff9b6dff; // purple
  inline constexpr juce::uint32 diminishedAccent = 0xffff6b6b; // red-ish
  inline constexpr juce::uint32 augmentedAccent  = 0xffffb347; // orange
  inline constexpr juce::uint32 maj7Accent       = 0xff6baed6; // light blue
  inline constexpr juce::uint32 min7Accent       = 0xffb39ddb; // light purple
  inline constexpr juce::uint32 dom7Accent       = 0xff5bc0de; // teal
  inline constexpr juce::uint32 dim7Accent       = 0xffef5350; // bright red
  inline constexpr juce::uint32 halfDim7Accent   = 0xffff8a65; // salmon
  ```

  Add a lookup function (still inside PadColours namespace):
  ```
  inline juce::uint32 accentForType(ChordType type) {
      constexpr juce::uint32 accents[] = {
          majorAccent, minorAccent, diminishedAccent, augmentedAccent,
          maj7Accent, min7Accent, dom7Accent, dim7Accent, halfDim7Accent
      };
      return accents[static_cast<int>(type)];
  }
  ```

  Add `#include "engine/ChordType.h"` at the top of ChordPumperLookAndFeel.h (needed for ChordType parameter).

  **PadComponent.cpp** — Rework `paint()`:

  Replace the flat background fill with a subtle vertical gradient:
  ```
  auto baseColour = isPressed ? juce::Colour(PadColours::pressed)
                  : isHovered ? juce::Colour(PadColours::hovered)
                              : juce::Colour(PadColours::background);
  auto gradient = juce::ColourGradient::vertical(
      baseColour.brighter(0.05f), baseColour.darker(0.05f), bounds);
  g.setGradientFill(gradient);
  g.fillRoundedRectangle(bounds, cornerSize);
  ```

  Replace the flat grey border with a chord-type accent border:
  ```
  g.setColour(juce::Colour(PadColours::accentForType(chord.type)).withAlpha(0.4f));
  g.drawRoundedRectangle(bounds, cornerSize, 1.5f);
  ```

  When `isPressed`, make the accent border fully opaque (`withAlpha(0.8f)`) for visual feedback. When `isHovered`, use `withAlpha(0.6f)`.
  </action>
  <verify>Build succeeds. Pads show subtle gradient backgrounds. Each chord type has a distinct accent border colour (major=blue, minor=purple, etc.). Pressed pads have brighter borders. Hovered pads have medium-brightness borders.</verify>
  <done>PadColours has 9 chord-type accent colours with accentForType() lookup. Pads render with vertical gradient fills and chord-type-specific accent borders at varying opacity for normal/hover/pressed states.</done>
</task>

<task type="auto">
  <name>Task 2: Strip and editor visual polish</name>
  <files>src/ui/ProgressionStrip.cpp, src/ui/PluginEditor.cpp</files>
  <action>
  **ProgressionStrip.cpp** — Enhance `paint()` for filled chord slots:

  For filled slots (where `i < chords.size()`), replace the flat `PadColours::background` fill:
  - Use a subtle gradient: `juce::ColourGradient::vertical(juce::Colour(PadColours::background).brighter(0.03f), juce::Colour(PadColours::background).darker(0.03f), slot.toFloat())`
  - Draw a chord-type accent border: `g.setColour(juce::Colour(PadColours::accentForType(chords[i].type)).withAlpha(0.5f)); g.drawRoundedRectangle(slot.toFloat(), 4.0f, 1.5f);`
  - Use the accent colour (at low alpha ~0.15f) as a subtle background tint blended with the base colour, OR simply keep the gradient background and add the accent border — the border alone provides clear type differentiation.

  For the chord name text, use white (`0xffe0e0e0`) — unchanged.

  For empty slots, keep the current dashed-outline style (the `0xff3a3a4a` rounded rect outline).

  **PluginEditor.cpp** — Refine the header/title area in `paint()`:
  - Keep the "ChordPumper" title but make it slightly more refined: use `juce::FontOptions(20.0f).withStyle("Bold")` for the title if available, or just `juce::FontOptions(20.0f)` for a slightly larger title.
  - Add a subtle separator line below the title area: `g.setColour(juce::Colour(0xff4a4a5a).withAlpha(0.5f)); g.drawHorizontalLine(40, 10.0f, getWidth() - 10.0f);`
  </action>
  <verify>Build succeeds. Strip slots show chord-type accent borders matching the grid pad colours. Empty slots remain as subtle outlines. Title area has refined typography and a separator line. Overall appearance is cohesive.</verify>
  <done>Progression strip slots have chord-type accent borders. Editor title refined with separator line. Visual style is consistent between grid pads and strip slots.</done>
</task>

</tasks>

<verification>
1. Build: `cmake --build build-release` completes without errors
2. Pad colours: Load plugin — major chords have blue accent, minor have purple, diminished have red, etc.
3. Gradient: Pads show subtle top-to-bottom gradient (not flat)
4. Hover/press: Hovering a pad brightens accent border; pressing brightens further
5. Strip colours: Drag chords of different types into strip — each slot shows matching accent border
6. Empty slots: Unfilled strip slots remain as subtle grey outlines
7. Title: "ChordPumper" title slightly larger with separator line below
8. Cohesion: Grid pads and strip slots use the same accent colour for the same chord type
</verification>

<success_criteria>
- 9 distinct chord-type accent colours defined in PadColours with accentForType() lookup
- Grid pads use gradient fills and accent borders instead of flat fills and grey borders
- Strip slots show matching chord-type accent borders for filled chords
- Hover and pressed states have appropriately varied accent opacity
- Editor title area refined with separator line
- All behavioral functionality from Plans 01-02 preserved
</success_criteria>

<output>
After completion, create `.planning/phases/07-ux-polish-progression-workflow/07-03-SUMMARY.md`
</output>
